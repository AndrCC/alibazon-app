function cov_8w7otmk2u(){var path="C:\\Users\\andre\\Documents\\Andre\\OSF\\alibazon-app\\app\\controllers\\auth.js";var hash="b167500f2d210c22a240d44214a678b2d00ded24";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\andre\\Documents\\Andre\\OSF\\alibazon-app\\app\\controllers\\auth.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:52}},"1":{start:{line:2,column:19},end:{line:2,column:48}},"2":{start:{line:3,column:37},end:{line:3,column:65}},"3":{start:{line:4,column:13},end:{line:4,column:28}},"4":{start:{line:5,column:43},end:{line:5,column:73}},"5":{start:{line:7,column:0},end:{line:9,column:1}},"6":{start:{line:8,column:4},end:{line:8,column:67}},"7":{start:{line:11,column:0},end:{line:21,column:3}},"8":{start:{line:12,column:19},end:{line:12,column:40}},"9":{start:{line:13,column:4},end:{line:15,column:5}},"10":{start:{line:14,column:8},end:{line:14,column:63}},"11":{start:{line:17,column:24},end:{line:17,column:46}},"12":{start:{line:18,column:4},end:{line:18,column:43}},"13":{start:{line:19,column:4},end:{line:19,column:22}},"14":{start:{line:24,column:0},end:{line:26,column:1}},"15":{start:{line:25,column:4},end:{line:25,column:67}},"16":{start:{line:28,column:0},end:{line:38,column:3}},"17":{start:{line:29,column:19},end:{line:29,column:40}},"18":{start:{line:30,column:4},end:{line:32,column:5}},"19":{start:{line:31,column:8},end:{line:31,column:63}},"20":{start:{line:34,column:24},end:{line:34,column:46}},"21":{start:{line:35,column:4},end:{line:35,column:43}},"22":{start:{line:36,column:4},end:{line:36,column:22}},"23":{start:{line:40,column:0},end:{line:49,column:1}},"24":{start:{line:41,column:19},end:{line:41,column:21}},"25":{start:{line:42,column:4},end:{line:47,column:5}},"26":{start:{line:43,column:23},end:{line:43,column:46}},"27":{start:{line:44,column:8},end:{line:44,column:24}},"28":{start:{line:48,column:4},end:{line:48,column:79}},"29":{start:{line:51,column:0},end:{line:64,column:3}},"30":{start:{line:53,column:28},end:{line:53,column:51}},"31":{start:{line:55,column:17},end:{line:55,column:44}},"32":{start:{line:57,column:4},end:{line:57,column:104}},"33":{start:{line:57,column:34},end:{line:57,column:104}},"34":{start:{line:63,column:4},end:{line:63,column:75}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:20},end:{line:7,column:21}},loc:{start:{line:7,column:40},end:{line:9,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:54},end:{line:21,column:1}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:20},end:{line:24,column:21}},loc:{start:{line:24,column:40},end:{line:26,column:1}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:34},end:{line:28,column:35}},loc:{start:{line:28,column:54},end:{line:38,column:1}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:40,column:18},end:{line:40,column:19}},loc:{start:{line:40,column:32},end:{line:49,column:1}},line:40},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:31},end:{line:51,column:32}},loc:{start:{line:51,column:51},end:{line:64,column:1}},line:51}},branchMap:{"0":{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:13,column:4},end:{line:15,column:5}}],line:13},"1":{loc:{start:{line:30,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:32,column:5}},{start:{line:30,column:4},end:{line:32,column:5}}],line:30},"2":{loc:{start:{line:42,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:47,column:5}},{start:{line:42,column:4},end:{line:47,column:5}}],line:42},"3":{loc:{start:{line:57,column:4},end:{line:57,column:104}},type:"if",locations:[{start:{line:57,column:4},end:{line:57,column:104}},{start:{line:57,column:4},end:{line:57,column:104}}],line:57}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b167500f2d210c22a240d44214a678b2d00ded24"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_8w7otmk2u=function(){return actualCoverage;};}return actualCoverage;}cov_8w7otmk2u();const asyncWrapper=(cov_8w7otmk2u().s[0]++,require('../util/asyncWrapper'));const getDirname=(cov_8w7otmk2u().s[1]++,require('../util/getDirname'));const{validationResult,Result}=(cov_8w7otmk2u().s[2]++,require('express-validator'));const path=(cov_8w7otmk2u().s[3]++,require('path'));const{signUp,signIn,getCartFromAPI}=(cov_8w7otmk2u().s[4]++,require('../services/authApi'));cov_8w7otmk2u().s[5]++;exports.getSignUp=(req,res,next)=>{cov_8w7otmk2u().f[0]++;cov_8w7otmk2u().s[6]++;res.render(path.join(getDirname(),'views','auth','signup'));};cov_8w7otmk2u().s[7]++;exports.postSignUp=asyncWrapper(async(req,res)=>{cov_8w7otmk2u().f[1]++;const errors=(cov_8w7otmk2u().s[8]++,validationResult(req));cov_8w7otmk2u().s[9]++;if(!errors.isEmpty()){cov_8w7otmk2u().b[0][0]++;cov_8w7otmk2u().s[10]++;return res.status(400).json({erros:errors.array()});}else{cov_8w7otmk2u().b[0][1]++;}const accountInfo=(cov_8w7otmk2u().s[11]++,await signUp(req.body));cov_8w7otmk2u().s[12]++;res.cookie('accountInfo',accountInfo);cov_8w7otmk2u().s[13]++;res.redirect('/');});cov_8w7otmk2u().s[14]++;exports.getSignIn=(req,res,next)=>{cov_8w7otmk2u().f[2]++;cov_8w7otmk2u().s[15]++;res.render(path.join(getDirname(),'views','auth','signin'));};cov_8w7otmk2u().s[16]++;exports.postSignIn=asyncWrapper(async(req,res)=>{cov_8w7otmk2u().f[3]++;const errors=(cov_8w7otmk2u().s[17]++,validationResult(req));cov_8w7otmk2u().s[18]++;if(!errors.isEmpty()){cov_8w7otmk2u().b[1][0]++;cov_8w7otmk2u().s[19]++;return res.status(400).json({erros:errors.array()});}else{cov_8w7otmk2u().b[1][1]++;}const accountInfo=(cov_8w7otmk2u().s[20]++,await signIn(req.body));cov_8w7otmk2u().s[21]++;res.cookie('accountInfo',accountInfo);cov_8w7otmk2u().s[22]++;res.redirect('/');});cov_8w7otmk2u().s[23]++;exports.getUser=(req,res)=>{cov_8w7otmk2u().f[4]++;let userInfo=(cov_8w7otmk2u().s[24]++,{});cov_8w7otmk2u().s[25]++;if(req.cookies.accountInfo){cov_8w7otmk2u().b[2][0]++;let{user}=(cov_8w7otmk2u().s[26]++,req.cookies.accountInfo);cov_8w7otmk2u().s[27]++;userInfo=user;// const tempDate = new Date(user.createdAt);
// userInfo.createdAt = tempDate.toDateString()
}else{cov_8w7otmk2u().b[2][1]++;}cov_8w7otmk2u().s[28]++;res.render(path.join(getDirname(),'views','auth','user'),{userInfo});};cov_8w7otmk2u().s[29]++;exports.getCart=asyncWrapper(async(req,res)=>{cov_8w7otmk2u().f[5]++;const{user,token}=(cov_8w7otmk2u().s[30]++,req.cookies.accountInfo);const cart=(cov_8w7otmk2u().s[31]++,await getCartFromAPI(token));cov_8w7otmk2u().s[32]++;if(user._id!==cart.userId){cov_8w7otmk2u().b[3][0]++;cov_8w7otmk2u().s[33]++;throw customError(401,'You are not authorized to view this content');}else{cov_8w7otmk2u().b[3][1]++;}//const total = cart.items.reduce((acc, i) => acc + (Number(i.variant.price) * Number(i.quantity)), 0);
//const session = await stripeMiddleware(req, cart.items);
cov_8w7otmk2u().s[34]++;res.render(path.join(getDirname(),'views','auth','cart'),{cart});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXN5bmNXcmFwcGVyIiwicmVxdWlyZSIsImdldERpcm5hbWUiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiUmVzdWx0IiwicGF0aCIsInNpZ25VcCIsInNpZ25JbiIsImdldENhcnRGcm9tQVBJIiwiZXhwb3J0cyIsImdldFNpZ25VcCIsInJlcSIsInJlcyIsIm5leHQiLCJyZW5kZXIiLCJqb2luIiwicG9zdFNpZ25VcCIsImVycm9ycyIsImlzRW1wdHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3MiLCJhcnJheSIsImFjY291bnRJbmZvIiwiYm9keSIsImNvb2tpZSIsInJlZGlyZWN0IiwiZ2V0U2lnbkluIiwicG9zdFNpZ25JbiIsImdldFVzZXIiLCJ1c2VySW5mbyIsImNvb2tpZXMiLCJ1c2VyIiwiZ2V0Q2FydCIsInRva2VuIiwiY2FydCIsIl9pZCIsInVzZXJJZCIsImN1c3RvbUVycm9yIl0sIm1hcHBpbmdzIjoiazhJQWVZO3lGQWZaLEtBQU1BLENBQUFBLFlBQVkseUJBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFWLENBQWxCLENBQ0EsS0FBTUMsQ0FBQUEsVUFBVSx5QkFBR0QsT0FBTyxDQUFDLG9CQUFELENBQVYsQ0FBaEIsQ0FDQSxLQUFNLENBQUVFLGdCQUFGLENBQW9CQyxNQUFwQiwwQkFBK0JILE9BQU8sQ0FBQyxtQkFBRCxDQUF0QyxDQUFOLENBQ0EsS0FBTUksQ0FBQUEsSUFBSSx5QkFBR0osT0FBTyxDQUFDLE1BQUQsQ0FBVixDQUFWLENBQ0EsS0FBTSxDQUFFSyxNQUFGLENBQVVDLE1BQVYsQ0FBa0JDLGNBQWxCLDBCQUFxQ1AsT0FBTyxDQUFDLHFCQUFELENBQTVDLENBQU4sQyx1QkFFQVEsT0FBTyxDQUFDQyxTQUFSLENBQW9CLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixDQUFXQyxJQUFYLEdBQW9CLCtDQUNwQ0QsR0FBRyxDQUFDRSxNQUFKLENBQVdULElBQUksQ0FBQ1UsSUFBTCxDQUFVYixVQUFVLEVBQXBC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QUVBLEtBQU1ZLENBQUFBLElBQUksMEJBQUcsS0FBTTNCLENBQUFBLGNBQWMsQ0FBQzBCLEtBQUQsQ0FBdkIsQ0FBVixDQUorQyx3QkFNL0MsR0FBSUYsSUFBSSxDQUFDSSxHQUFMLEdBQWFELElBQUksQ0FBQ0UsTUFBdEIsQ0FBOEIsd0RBQU1DLENBQUFBLFdBQVcsQ0FBQyxHQUFELENBQU0sNkNBQU4sQ0FBakIsQ0FBc0UsQ0FBcEcsZ0NBRUE7QUFFQTtBQVYrQyx3QkFZL0MxQixHQUFHLENBQUNFLE1BQUosQ0FBV1QsSUFBSSxDQUFDVSxJQUFMLENBQVViLFVBQVUsRUFBcEIsQ0FBd0IsT0FBeEIsQ0FBaUMsTUFBakMsQ0FBeUMsTUFBekMsQ0FBWCxDQUE2RCxDQUFFaUMsSUFBRixDQUE3RCxFQUNILENBYjZCLENBQTlCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXN5bmNXcmFwcGVyID0gcmVxdWlyZSgnLi4vdXRpbC9hc3luY1dyYXBwZXInKTtcclxuY29uc3QgZ2V0RGlybmFtZSA9IHJlcXVpcmUoJy4uL3V0aWwvZ2V0RGlybmFtZScpO1xyXG5jb25zdCB7IHZhbGlkYXRpb25SZXN1bHQsIFJlc3VsdCB9ID0gcmVxdWlyZSgnZXhwcmVzcy12YWxpZGF0b3InKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgeyBzaWduVXAsIHNpZ25JbiwgZ2V0Q2FydEZyb21BUEkgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2F1dGhBcGknKTtcclxuXHJcbmV4cG9ydHMuZ2V0U2lnblVwID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICByZXMucmVuZGVyKHBhdGguam9pbihnZXREaXJuYW1lKCksICd2aWV3cycsICdhdXRoJywgJ3NpZ251cCcpKTtcclxufVxyXG5cclxuZXhwb3J0cy5wb3N0U2lnblVwID0gYXN5bmNXcmFwcGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xyXG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3M6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjY291bnRJbmZvID0gYXdhaXQgc2lnblVwKHJlcS5ib2R5KTtcclxuICAgIHJlcy5jb29raWUoJ2FjY291bnRJbmZvJywgYWNjb3VudEluZm8pO1xyXG4gICAgcmVzLnJlZGlyZWN0KCcvJyk7XHJcblxyXG59KTtcclxuXHJcblxyXG5leHBvcnRzLmdldFNpZ25JbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgcmVzLnJlbmRlcihwYXRoLmpvaW4oZ2V0RGlybmFtZSgpLCAndmlld3MnLCAnYXV0aCcsICdzaWduaW4nKSk7XHJcbn1cclxuXHJcbmV4cG9ydHMucG9zdFNpZ25JbiA9IGFzeW5jV3JhcHBlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9zOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY2NvdW50SW5mbyA9IGF3YWl0IHNpZ25JbihyZXEuYm9keSk7XHJcbiAgICByZXMuY29va2llKCdhY2NvdW50SW5mbycsIGFjY291bnRJbmZvKTtcclxuICAgIHJlcy5yZWRpcmVjdCgnLycpO1xyXG5cclxufSk7XHJcblxyXG5leHBvcnRzLmdldFVzZXIgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB1c2VySW5mbyA9IHt9O1xyXG4gICAgaWYgKHJlcS5jb29raWVzLmFjY291bnRJbmZvKSB7XHJcbiAgICAgICAgbGV0IHsgdXNlciB9ID0gcmVxLmNvb2tpZXMuYWNjb3VudEluZm87XHJcbiAgICAgICAgdXNlckluZm8gPSB1c2VyO1xyXG4gICAgICAgIC8vIGNvbnN0IHRlbXBEYXRlID0gbmV3IERhdGUodXNlci5jcmVhdGVkQXQpO1xyXG4gICAgICAgIC8vIHVzZXJJbmZvLmNyZWF0ZWRBdCA9IHRlbXBEYXRlLnRvRGF0ZVN0cmluZygpXHJcbiAgICB9XHJcbiAgICByZXMucmVuZGVyKHBhdGguam9pbihnZXREaXJuYW1lKCksICd2aWV3cycsICdhdXRoJywgJ3VzZXInKSwgeyB1c2VySW5mbyB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5nZXRDYXJ0ID0gYXN5bmNXcmFwcGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgIGNvbnN0IHsgdXNlciwgdG9rZW4gfSA9IHJlcS5jb29raWVzLmFjY291bnRJbmZvO1xyXG5cclxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBnZXRDYXJ0RnJvbUFQSSh0b2tlbik7XHJcblxyXG4gICAgaWYgKHVzZXIuX2lkICE9PSBjYXJ0LnVzZXJJZCkgdGhyb3cgY3VzdG9tRXJyb3IoNDAxLCAnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byB2aWV3IHRoaXMgY29udGVudCcpO1xyXG5cclxuICAgIC8vY29uc3QgdG90YWwgPSBjYXJ0Lml0ZW1zLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyAoTnVtYmVyKGkudmFyaWFudC5wcmljZSkgKiBOdW1iZXIoaS5xdWFudGl0eSkpLCAwKTtcclxuXHJcbiAgICAvL2NvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGVNaWRkbGV3YXJlKHJlcSwgY2FydC5pdGVtcyk7XHJcblxyXG4gICAgcmVzLnJlbmRlcihwYXRoLmpvaW4oZ2V0RGlybmFtZSgpLCAndmlld3MnLCAnYXV0aCcsICdjYXJ0JyksIHsgY2FydCB9KTtcclxufSk7XHJcbiJdfQ==