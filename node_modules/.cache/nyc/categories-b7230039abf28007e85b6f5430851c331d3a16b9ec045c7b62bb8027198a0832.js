function cov_gyjt8vgo3(){var path="C:\\Users\\andre\\Documents\\Andre\\OSF\\alibazon-app\\app\\controllers\\categories.js";var hash="135a1d93fc7b708d404e983f2c659be52fe36fcf";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\andre\\Documents\\Andre\\OSF\\alibazon-app\\app\\controllers\\categories.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:52}},"1":{start:{line:2,column:19},end:{line:2,column:48}},"2":{start:{line:3,column:13},end:{line:3,column:28}},"3":{start:{line:4,column:67},end:{line:4,column:93}},"4":{start:{line:6,column:0},end:{line:43,column:3}},"5":{start:{line:7,column:29},end:{line:7,column:42}},"6":{start:{line:8,column:25},end:{line:8,column:66}},"7":{start:{line:13,column:21},end:{line:13,column:45}},"8":{start:{line:15,column:14},end:{line:15,column:22}},"9":{start:{line:16,column:14},end:{line:16,column:24}},"10":{start:{line:18,column:4},end:{line:38,column:5}},"11":{start:{line:19,column:18},end:{line:26,column:10}},"12":{start:{line:20,column:12},end:{line:25,column:13}},"13":{start:{line:21,column:30},end:{line:21,column:45}},"14":{start:{line:22,column:16},end:{line:24,column:17}},"15":{start:{line:23,column:20},end:{line:23,column:29}},"16":{start:{line:27,column:8},end:{line:27,column:25}},"17":{start:{line:29,column:20},end:{line:36,column:10}},"18":{start:{line:30,column:12},end:{line:35,column:13}},"19":{start:{line:31,column:30},end:{line:31,column:45}},"20":{start:{line:32,column:16},end:{line:34,column:17}},"21":{start:{line:33,column:20},end:{line:33,column:29}},"22":{start:{line:37,column:8},end:{line:37,column:27}},"23":{start:{line:40,column:4},end:{line:40,column:105}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:37},end:{line:6,column:38}},loc:{start:{line:6,column:57},end:{line:43,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:36},end:{line:19,column:37}},loc:{start:{line:19,column:41},end:{line:26,column:9}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:38},end:{line:29,column:39}},loc:{start:{line:29,column:43},end:{line:36,column:9}},line:29}},branchMap:{"0":{loc:{start:{line:18,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:38,column:5}},{start:{line:18,column:4},end:{line:38,column:5}}],line:18},"1":{loc:{start:{line:20,column:12},end:{line:25,column:13}},type:"if",locations:[{start:{line:20,column:12},end:{line:25,column:13}},{start:{line:20,column:12},end:{line:25,column:13}}],line:20},"2":{loc:{start:{line:22,column:16},end:{line:24,column:17}},type:"if",locations:[{start:{line:22,column:16},end:{line:24,column:17}},{start:{line:22,column:16},end:{line:24,column:17}}],line:22},"3":{loc:{start:{line:30,column:12},end:{line:35,column:13}},type:"if",locations:[{start:{line:30,column:12},end:{line:35,column:13}},{start:{line:30,column:12},end:{line:35,column:13}}],line:30},"4":{loc:{start:{line:32,column:16},end:{line:34,column:17}},type:"if",locations:[{start:{line:32,column:16},end:{line:34,column:17}},{start:{line:32,column:16},end:{line:34,column:17}}],line:32}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"135a1d93fc7b708d404e983f2c659be52fe36fcf"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_gyjt8vgo3=function(){return actualCoverage;};}return actualCoverage;}cov_gyjt8vgo3();const asyncWrapper=(cov_gyjt8vgo3().s[0]++,require('../util/asyncWrapper'));const getDirname=(cov_gyjt8vgo3().s[1]++,require('../util/getDirname'));const path=(cov_gyjt8vgo3().s[2]++,require('path'));const{getAllCategories,getSingleCategory,getRootCategories}=(cov_gyjt8vgo3().s[3]++,require('../services/api'));cov_gyjt8vgo3().s[4]++;exports.getCategories=asyncWrapper(async(req,res)=>{cov_gyjt8vgo3().f[0]++;const mainCategorySlug=(cov_gyjt8vgo3().s[5]++,req.params.id);const mainCategory=(cov_gyjt8vgo3().s[6]++,await getSingleCategory(mainCategorySlug));//const categories = mainCategorySlug ? await getRootCategories(mainCategorySlug) : await getAllCategories();
let categories=(cov_gyjt8vgo3().s[7]++,await getAllCategories());const m=(cov_gyjt8vgo3().s[8]++,/^mens$/);const w=(cov_gyjt8vgo3().s[9]++,/^womens$/);cov_gyjt8vgo3().s[10]++;if(mainCategorySlug==='mens'){cov_gyjt8vgo3().b[0][0]++;let men=(cov_gyjt8vgo3().s[11]++,categories.filter(c=>{cov_gyjt8vgo3().f[1]++;cov_gyjt8vgo3().s[12]++;if(c.parent_category_id!=='root'){cov_gyjt8vgo3().b[1][0]++;let slugArr=(cov_gyjt8vgo3().s[13]++,c.id.split('-'));cov_gyjt8vgo3().s[14]++;if(m.test(slugArr[0])){cov_gyjt8vgo3().b[2][0]++;cov_gyjt8vgo3().s[15]++;return c;}else{cov_gyjt8vgo3().b[2][1]++;}}else{cov_gyjt8vgo3().b[1][1]++;}}));cov_gyjt8vgo3().s[16]++;categories=men;}else{cov_gyjt8vgo3().b[0][1]++;let women=(cov_gyjt8vgo3().s[17]++,categories.filter(c=>{cov_gyjt8vgo3().f[2]++;cov_gyjt8vgo3().s[18]++;if(c.parent_category_id!=='root'){cov_gyjt8vgo3().b[3][0]++;let slugArr=(cov_gyjt8vgo3().s[19]++,c.id.split('-'));cov_gyjt8vgo3().s[20]++;if(w.test(slugArr[0])){cov_gyjt8vgo3().b[4][0]++;cov_gyjt8vgo3().s[21]++;return c;}else{cov_gyjt8vgo3().b[4][1]++;}}else{cov_gyjt8vgo3().b[3][1]++;}}));cov_gyjt8vgo3().s[22]++;categories=women;}cov_gyjt8vgo3().s[23]++;res.render(path.join(getDirname(),'views','products','categories'),{mainCategory,categories});//res.status(200).render('views/products/categories', { mainCategory, categories });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVnb3JpZXMuanMiXSwibmFtZXMiOlsiYXN5bmNXcmFwcGVyIiwicmVxdWlyZSIsImdldERpcm5hbWUiLCJwYXRoIiwiZ2V0QWxsQ2F0ZWdvcmllcyIsImdldFNpbmdsZUNhdGVnb3J5IiwiZ2V0Um9vdENhdGVnb3JpZXMiLCJleHBvcnRzIiwiZ2V0Q2F0ZWdvcmllcyIsInJlcSIsInJlcyIsIm1haW5DYXRlZ29yeVNsdWciLCJwYXJhbXMiLCJpZCIsIm1haW5DYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJtIiwidyIsIm1lbiIsImZpbHRlciIsImMiLCJwYXJlbnRfY2F0ZWdvcnlfaWQiLCJzbHVnQXJyIiwic3BsaXQiLCJ0ZXN0Iiwid29tZW4iLCJyZW5kZXIiLCJqb2luIl0sIm1hcHBpbmdzIjoicWpIQWVZO3lGQWZaLEtBQU1BLENBQUFBLFlBQVkseUJBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFWLENBQWxCLENBQ0EsS0FBTUMsQ0FBQUEsVUFBVSx5QkFBR0QsT0FBTyxDQUFDLG9CQUFELENBQVYsQ0FBaEIsQ0FDQSxLQUFNRSxDQUFBQSxJQUFJLHlCQUFHRixPQUFPLENBQUMsTUFBRCxDQUFWLENBQVYsQ0FDQSxLQUFNLENBQUVHLGdCQUFGLENBQW9CQyxpQkFBcEIsQ0FBdUNDLGlCQUF2QywwQkFBNkRMLE9BQU8sQ0FBQyxpQkFBRCxDQUFwRSxDQUFOLEMsdUJBRUFNLE9BQU8sQ0FBQ0MsYUFBUixDQUF3QlIsWUFBWSxDQUFDLE1BQU9TLEdBQVAsQ0FBWUMsR0FBWixHQUFvQix3QkFDckQsS0FBTUMsQ0FBQUEsZ0JBQWdCLHlCQUFHRixHQUFHLENBQUNHLE1BQUosQ0FBV0MsRUFBZCxDQUF0QixDQUNBLEtBQU1DLENBQUFBLFlBQVkseUJBQUcsS0FBTVQsQ0FBQUEsaUJBQWlCLENBQUNNLGdCQUFELENBQTFCLENBQWxCLENBR0E7QUFFQSxHQUFJSSxDQUFBQSxVQUFVLHlCQUFHLEtBQU1YLENBQUFBLGdCQUFnQixFQUF6QixDQUFkLENBRUEsS0FBTVksQ0FBQUEsQ0FBQyx5QkFBRyxRQUFILENBQVAsQ0FDQSxLQUFNQyxDQUFBQSxDQUFDLHlCQUFHLFVBQUgsQ0FBUCxDQVZxRCx3QkFZckQsR0FBSU4sZ0JBQWdCLEdBQUssTUFBekIsQ0FBaUMsMkJBQzdCLEdBQUlPLENBQUFBLEdBQUcsMEJBQUdILFVBQVUsQ0FBQ0ksTUFBWCxDQUFrQkMsQ0FBQyxFQUFJLGdEQUM3QixHQUFJQSxDQUFDLENBQUNDLGtCQUFGLEdBQXlCLE1BQTdCLENBQXFDLDJCQUNqQyxHQUFJQyxDQUFBQSxPQUFPLDBCQUFHRixDQUFDLENBQUNQLEVBQUYsQ0FBS1UsS0FBTCxDQUFXLEdBQVgsQ0FBSCxDQUFYLENBRGlDLHdCQUVqQyxHQUFJUCxDQUFDLENBQUNRLElBQUYsQ0FBT0YsT0FBTyxDQUFDLENBQUQsQ0FBZCxDQUFKLENBQXdCLG1EQUNwQixNQUFPRixDQUFBQSxDQUFQLENBQ0gsQ0FGRCxnQ0FHSCxDQUxELGdDQU1ILENBUFMsQ0FBSCxDQUFQLENBRDZCLHdCQVM3QkwsVUFBVSxDQUFHRyxHQUFiLENBQ0gsQ0FWRCxJQVVPLDJCQUNILEdBQUlPLENBQUFBLEtBQUssMEJBQUdWLFVBQVUsQ0FBQ0ksTUFBWCxDQUFrQkMsQ0FBQyxFQUFJLGdEQUMvQixHQUFJQSxDQUFDLENBQUNDLGtCQUFGLEdBQXlCLE1BQTdCLENBQXFDLDJCQUNqQyxHQUFJQyxDQUFBQSxPQUFPLDBCQUFHRixDQUFDLENBQUNQLEVBQUYsQ0FBS1UsS0FBTCxDQUFXLEdBQVgsQ0FBSCxDQUFYLENBRGlDLHdCQUVqQyxHQUFJTixDQUFDLENBQUNPLElBQUYsQ0FBT0YsT0FBTyxDQUFDLENBQUQsQ0FBZCxDQUFKLENBQXdCLG1EQUNwQixNQUFPRixDQUFBQSxDQUFQLENBQ0gsQ0FGRCxnQ0FHSCxDQUxELGdDQU1ILENBUFcsQ0FBSCxDQUFULENBREcsd0JBU0hMLFVBQVUsQ0FBR1UsS0FBYixDQUNILENBaENvRCx3QkFrQ3JEZixHQUFHLENBQUNnQixNQUFKLENBQVd2QixJQUFJLENBQUN3QixJQUFMLENBQVV6QixVQUFVLEVBQXBCLENBQXdCLE9BQXhCLENBQWlDLFVBQWpDLENBQTZDLFlBQTdDLENBQVgsQ0FBdUUsQ0FBRVksWUFBRixDQUFnQkMsVUFBaEIsQ0FBdkUsRUFDQTtBQUVILENBckNtQyxDQUFwQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFzeW5jV3JhcHBlciA9IHJlcXVpcmUoJy4uL3V0aWwvYXN5bmNXcmFwcGVyJyk7XHJcbmNvbnN0IGdldERpcm5hbWUgPSByZXF1aXJlKCcuLi91dGlsL2dldERpcm5hbWUnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgeyBnZXRBbGxDYXRlZ29yaWVzLCBnZXRTaW5nbGVDYXRlZ29yeSwgZ2V0Um9vdENhdGVnb3JpZXMgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2FwaScpO1xyXG5cclxuZXhwb3J0cy5nZXRDYXRlZ29yaWVzID0gYXN5bmNXcmFwcGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgbWFpbkNhdGVnb3J5U2x1ZyA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBtYWluQ2F0ZWdvcnkgPSBhd2FpdCBnZXRTaW5nbGVDYXRlZ29yeShtYWluQ2F0ZWdvcnlTbHVnKTtcclxuXHJcblxyXG4gICAgLy9jb25zdCBjYXRlZ29yaWVzID0gbWFpbkNhdGVnb3J5U2x1ZyA/IGF3YWl0IGdldFJvb3RDYXRlZ29yaWVzKG1haW5DYXRlZ29yeVNsdWcpIDogYXdhaXQgZ2V0QWxsQ2F0ZWdvcmllcygpO1xyXG5cclxuICAgIGxldCBjYXRlZ29yaWVzID0gYXdhaXQgZ2V0QWxsQ2F0ZWdvcmllcygpO1xyXG5cclxuICAgIGNvbnN0IG0gPSAvXm1lbnMkLztcclxuICAgIGNvbnN0IHcgPSAvXndvbWVucyQvO1xyXG5cclxuICAgIGlmIChtYWluQ2F0ZWdvcnlTbHVnID09PSAnbWVucycpIHtcclxuICAgICAgICBsZXQgbWVuID0gY2F0ZWdvcmllcy5maWx0ZXIoYyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjLnBhcmVudF9jYXRlZ29yeV9pZCAhPT0gJ3Jvb3QnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2x1Z0FyciA9IGMuaWQuc3BsaXQoJy0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChtLnRlc3Qoc2x1Z0FyclswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhdGVnb3JpZXMgPSBtZW47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCB3b21lbiA9IGNhdGVnb3JpZXMuZmlsdGVyKGMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYy5wYXJlbnRfY2F0ZWdvcnlfaWQgIT09ICdyb290Jykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNsdWdBcnIgPSBjLmlkLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAody50ZXN0KHNsdWdBcnJbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjYXRlZ29yaWVzID0gd29tZW47XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnJlbmRlcihwYXRoLmpvaW4oZ2V0RGlybmFtZSgpLCAndmlld3MnLCAncHJvZHVjdHMnLCAnY2F0ZWdvcmllcycpLCB7IG1haW5DYXRlZ29yeSwgY2F0ZWdvcmllcyB9KTtcclxuICAgIC8vcmVzLnN0YXR1cygyMDApLnJlbmRlcigndmlld3MvcHJvZHVjdHMvY2F0ZWdvcmllcycsIHsgbWFpbkNhdGVnb3J5LCBjYXRlZ29yaWVzIH0pO1xyXG5cclxufSk7Il19